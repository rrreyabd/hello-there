<!DOCTYPE html>
<html lang="en" scroll="smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Hello There Website">
    <title>Hello there!</title>
    <link rel="stylesheet" href="dist/output.css">
</head>
<body class="bg-main flex flex-col items-center">

    <!-- BACKGROUND -->
    <!-- <div class="fixed top-1/3 left-1/3 -z-20 bg-blue h-64 w-64 rounded-full"></div>
    <div class="fixed top-0 bg-main -z-10 h-screen w-screen bg-opacity-30 backdrop-blur-[150px]"></div> -->

    <header class="bg-input h-[15vh] sm:h-[10vh] w-full">
        <nav class="flex h-full w-full items-center justify-center">
            <p class="font-header font-bold text-4xl text-white">Hello there!</p>
        </nav>
    </header>
    <section class="w-screen sm:w-[40rem] h-fit pb-8">
        <main class="font-main">
            <div class="flex justify-center h-[20vh] items-center">
                <h1 class="text-white text-center font-semibold text-3xl w-1/2">What is Your Question?</h1>
            </div>

            <div class="px-4 sm:px-8 flex flex-col gap-8">
                <!-- QUESTION -->
                <div class="flex flex-col gap-4 bg-container border border-border p-4 rounded-md" id="questionContainer">
                    <p tabindex="0" id="questionHeader" class="font-semibold text-xl text-white flex justify-between items-center">
                        Question
                        <span class="italic font-thin text-gray-300 text-sm">min 10 characters</span>
                    </p>
                    <textarea 
                        name="question" 
                        id="question" 
                        placeholder="I like you, would you like to be my-" 
                        minlength="10"
                        maxlength="100"
                        aria-label="Question"
                        oninput="countCharacters('question', 'questionCount')"
                        class="w-full h-32 resize-none rounded-md bg-input border border-border px-4 py-2 text-white text-lg"
                        ></textarea>
                    <div class="flex justify-between">
                        <p class="text-blue" id="errorQuestion"></p>
                        <p class="text-end text-gray-300" id="questionCount">0/100</p>
                    </div>
                    
                </div>
                <!-- QUESTION ENDS -->

                <!-- ANSWER -->
                <div class="flex flex-col gap-4 bg-container border border-border p-4 rounded-md" id="answerContainer">
                    <p tabindex="0" id="answerHeader" class="font-semibold text-xl text-white flex justify-between items-center">
                        Answer
                        <span class="italic font-thin text-gray-300 text-sm">2-10 characters</span>
                    </p>
                    
                    <input 
                        type="text" 
                        name="yes" 
                        id="yes"
                        placeholder="Correct Answer Here"
                        minlength="2"
                        maxlength="10"
                        aria-label="Yes"
                        class="w-full h-12 bg-input border border-border flex items-center px-4 py-2 text-xl text-white rounded-md placeholder:text-lg"
                        >
                    <input 
                        type="text" 
                        name="no" 
                        id="no"
                        placeholder="Wrong Answer Here"
                        minlength="2"
                        maxlength="10"
                        aria-label="No"
                        class="w-full h-12 bg-input border border-border flex items-center px-4 py-2 text-xl text-white rounded-md placeholder:text-lg"
                        >

                    <!-- <div class="flex justify-between">
                        <div class="w-[49%] h-24 bg-input brightness-150 flex justify-center rounded-md items-center px-4 py-2 text-xl text-white aspect-auto">
                            <p>True</p>
                        </div>

                        <div class="w-[49%] h-24 bg-input brightness-150 flex justify-center rounded-md items-center px-4 py-2 text-xl text-white aspect-auto">
                            <p>False</p>
                        </div>
                    </div> -->
                </div>
                <!-- ANSWER ENDS -->

                <!-- RESULT -->
                <div class="flex flex-col gap-4 bg-container border border-border p-4 rounded-md" id="resultContainer">
                    <p tabindex="0" id="resultHeader" class="font-semibold text-xl text-white flex justify-between items-center">
                        Result
                        <span class="italic font-thin text-gray-300 text-sm">min 2 characters</span>
                    </p>

                    <div class="flex flex-col gap-2">
                        <input 
                            type="text" 
                            name="result" 
                            id="result"
                            minlength="2"
                            maxlength="10"
                            placeholder="Yeayyy!"
                            aria-label="Result Head"
                            class="h-12 bg-input border border-border flex items-center px-4 py-2 text-xl text-white rounded-md"
                            oninput="countCharacters('result', 'resultCount') + updateText('result', 'resultHead')"
                            >

                        <div class="flex justify-between">
                            <p class="text-blue" id="errorResult"></p>
                            <p class="text-end text-gray-300" id="resultCount">8/10</p>
                        </div>
                    </div>

                    <div class="flex flex-col gap-2">
                        <input 
                            type="text" 
                            name="result" 
                            id="resultBody"
                            minlength="2"
                            maxlength="100"
                            aria-label="Result Body"
                            placeholder="Message"
                            class="h-12 w-full bg-input border border-border px-4 py-2 text-xl text-white rounded-md resize-none text-start break-all"
                            oninput="countCharacters('resultBody', 'resultBodyCount') + updateText('resultBody', 'resultBodyText')">
                        <div class="flex justify-between">
                            <p class="text-blue" id="errorResultBody"></p>
                            <p class="text-end text-gray-300" id="resultBodyCount">30/100</p>
                        </div>
                    </div>
                </div>
                <!-- RESULT ENDS -->

                <!-- PREVIEW -->
                <!-- <div class="min-h-[10rem] bg-input brightness-150 w-full rounded-md text-white p-4 flex flex-col gap-4">
                    <div class="flex justify-between font-medium text-lg">
                        <p id="resultHead">Yeayyyy!</p>
                        &#x2715;    
                    </div>
                    <hr>
                    <p class="font-light text-lg break-all" id="resultBodyText">Well, give me your number then</p>
                </div> -->
                <!-- PREVIEW ENDS -->

                <div class="flex flex-col gap-4">
                    <button onclick="genereteLink()" type="button" class="font-semibold text-white text-lg bg-blue py-3 rounded-md hover:shadow-[0_0px_40px_rgba(8,_112,_184,_0.7)] transition duration-300 ease-in-out">Generate Link</button>
                    
                    <!-- GENERATED LINK -->
                    <div class="text-white min-h-[10rem] bg-input p-4 break-all rounded-md border border-border">
                        <!-- BEFORE -->
                        <p id="link" class="text-gray-300">The link will be displayed here once you click the 'Generate Link' button.</p>
                        
                        <!-- AFTER -->
                        <!-- <p class="text-white">https://</p> -->
                    </div>
                    <!-- GENERATED LINK ENDS -->

                    <!-- COPY BUTTON -->
                    <button type="button" onclick="copyText()" class="w-full bg-input py-3 hover:brightness-150 text-white text-lg font-semibold transition duration-100 ease-in-out rounded-md border border-border">Copy Link</button>
                    
                    <div class="text-center text-white text-lg" id="copyMessage"></div>
                    
                    <p class="text-center text-white">
                        made by 
                        <a class="text-blue font-semibold hover:underline" target="_blank" href="https://instagram.com/rrreyabd">rrreyabd</a> 
                        and 
                        <a class="text-blue font-semibold hover:underline" target="_blank" href="https://instagram.com/winz.liu">winz.liu</a> 
                    </p>
                </div>
                <!-- COPY BUTTON ENDS -->

            </div>

        </main>
    </section>

    <script src="public/js/main.js"></script>

    <!-- generate link -->
    <script>
        function genereteURI(text){
            const encodedText = encodeURI(text).replace(/[!'()*]/g, (c) => '%' + c.charCodeAt(0).toString(16).toUpperCase());

            return encodedText;
        }

        function genereteLink(){
            const path = window.location.href;

            var pertanyaan = document.getElementById("question").value;
            var benar = document.getElementById("yes").value;
            var salah = document.getElementById("no").value;
            var header = document.getElementById("result").value;
            var resultBody = document.getElementById("resultBody").value;
        

            // validasi
            // validasi question
            if (pertanyaan.length < 10){
                document.getElementById("question").classList.add("border-2");
                document.getElementById("question").classList.add("border-blue");
                document.getElementById("question").classList.remove("border-border");
                document.getElementById("questionContainer").classList.add("shadow-[0_20px_80px_rgba(8,_112,_184,_0.7)]");
                document.getElementById("errorQuestion").innerHTML = "min 10 characters";
                document.getElementById("questionHeader").focus();
            }else{
                document.getElementById("question").classList.remove("border-2");
                document.getElementById("question").classList.remove("border-blue");
                document.getElementById("question").classList.add("border-border");
                document.getElementById("questionContainer").classList.remove("shadow-[0_20px_80px_rgba(8,_112,_184,_0.7)]");
                document.getElementById("errorQuestion").innerHTML = "";
            }
            // akhir validasi question

            // validasi yes
            if (benar.length < 2){
                document.getElementById("yes").classList.add("border-2");
                document.getElementById("yes").classList.add("border-blue");
                document.getElementById("yes").classList.remove("border-border");
                document.getElementById("answerContainer").classList.add("shadow-[0_20px_80px_rgba(8,_112,_184,_0.7)]");
                document.getElementById("answerHeader").focus();
            }else{
                document.getElementById("yes").classList.remove("border-2");
                document.getElementById("yes").classList.remove("border-blue");
                document.getElementById("yes").classList.add("border-border");
                document.getElementById("answerContainer").classList.remove("shadow-[0_20px_80px_rgba(8,_112,_184,_0.7)]");
            }
            // akhir validasi yes

            // validasi no
            if (salah.length < 2){
                document.getElementById("no").classList.add("border-2");
                document.getElementById("no").classList.add("border-blue");
                document.getElementById("no").classList.remove("border-border");
                document.getElementById("answerContainer").classList.add("shadow-[0_20px_80px_rgba(8,_112,_184,_0.7)]");
                document.getElementById("answerHeader").focus();
            }else{
                document.getElementById("no").classList.remove("border-2");
                document.getElementById("no").classList.remove("border-blue");
                document.getElementById("no").classList.add("border-border");
                document.getElementById("answerContainer").classList.remove("shadow-[0_20px_80px_rgba(8,_112,_184,_0.7)]");
            }
            // akhir validasi no

            // validasi result
            if (header.length < 2){
                document.getElementById("result").classList.add("border-2");
                document.getElementById("result").classList.add("border-blue");
                document.getElementById("result").classList.remove("border-border");
                document.getElementById("errorResult").innerHTML = "min 2 characters";
                document.getElementById("resultContainer").classList.add("shadow-[0_20px_80px_rgba(8,_112,_184,_0.7)]");
                document.getElementById("resultHeader").focus();
            }else{
                document.getElementById("result").classList.remove("border-2");
                document.getElementById("result").classList.remove("border-blue");
                document.getElementById("result").classList.add("border-border");
                document.getElementById("errorResult").innerHTML = "";
            }
            // akhir validasi result

            // validasi result body
            if (resultBody.length < 2){
                document.getElementById("resultBody").classList.add("border-2");
                document.getElementById("resultBody").classList.add("border-blue");
                document.getElementById("resultBody").classList.remove("border-border");
                document.getElementById("errorResultBody").innerHTML = "min 2 characters";
                document.getElementById("resultContainer").classList.add("shadow-[0_20px_80px_rgba(8,_112,_184,_0.7)]");
                document.getElementById("resultHeader").focus();
            }else{
                document.getElementById("resultBody").classList.remove("border-2");
                document.getElementById("resultBody").classList.remove("border-blue");
                document.getElementById("resultBody").classList.add("border-border");
                document.getElementById("errorResultBody").innerHTML = "";
            }
            // akhir validasi result body
            // akhir validasi
    
            if (pertanyaan.length >= 10 && benar.length >= 2 && salah.length >= 2 && header.length >= 2 && resultBody.length >= 2){
                document.getElementById("link").innerHTML = path + "answer.html?p=" + genereteURI(pertanyaan) + "&b=" + genereteURI(benar) + "&s=" + genereteURI(salah) + "&h=" + genereteURI(header) + "&r=" + genereteURI(resultBody);
            }
        }

        // copy link
        function copyText() {
            const inputElement = document.getElementById("link");

            const range = document.createRange();
            range.selectNode(inputElement);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
            
            document.execCommand('copy');
        
            window.getSelection().removeAllRanges();
        
            document.getElementById("copyMessage").textContent = "Link copied to clipboard!";
        }
        // akhir copy link
    </script>
    <!-- akhir generate link -->

</body>
</html>
